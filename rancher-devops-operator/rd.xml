<?xml version="1.0" encoding="utf-8"?>
<Directives>
  <!-- Preserve metadata needed for Kubernetes watch event JSON deserialization under NativeAOT -->
  <!-- Broaden preservation for KubernetesClient: allow dynamic access to all public types to fix WatchEvent generic instantiation issues -->
  <Assembly Name="KubernetesClient" Dynamic="Required Public" />
  <!-- Explicit generic watcher constructs (defensive) -->
  <Assembly Name="KubernetesClient">
    <Type Name="k8s.Watcher`1" Dynamic="Required All" />
    <Type Name="k8s.Watcher`1+WatchEvent" Dynamic="Required All" />
    <Type Name="k8s.KubernetesObject" Dynamic="Required All" />
  </Assembly>
  <Assembly Name="KubeOps.KubernetesClient">
    <Type Name="KubeOps.KubernetesClient.KubernetesClient" Dynamic="Required All" />
  </Assembly>
  <!-- Broaden preservation for operator abstractions to ensure CRD watch handlers have constructors -->
  <Assembly Name="KubeOps.Abstractions" Dynamic="Required Public" />
  <Assembly Name="KubeOps.Operator" Dynamic="Required Public" />
  <Assembly Name="KubeOps.Generator" Dynamic="Required Public" />
  </Assembly>
  <!-- Preserve custom CRD entity and nested types -->
  <Assembly Name="rancher-devops-operator">
    <Type Name="rancher_devops_operator.Entities.V1RancherProject" Dynamic="Required All" />
    <Type Name="rancher_devops_operator.Entities.V1RancherProject+RancherProjectSpec" Dynamic="Required All" />
    <Type Name="rancher_devops_operator.Entities.V1RancherProject+RancherProjectStatus" Dynamic="Required All" />
    <Type Name="rancher_devops_operator.Entities.V1RancherProject+ProjectMember" Dynamic="Required All" />
    <Type Name="rancher_devops_operator.Entities.V1RancherProject+ResourceQuota" Dynamic="Required All" />
  </Assembly>
</Directives>
